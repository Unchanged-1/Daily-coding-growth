# 运算符与优先级

## 一、C++运算符

运算符用于标识符之间，它们共同构成一组表达式。为了方便新手入门，这里不会一股脑地列出全部运算符，而是先介绍一些常见、常用的运算符。为了方便理解，接下来的所有运算符的参数均默认依次为 a、b、c...，以此类推。

### 1.赋值运算符

赋值运算符用于将右侧表达式的值赋予左侧变量，支持链式操作和组合运算。

| 运算名称 | 运算符 | 功能说明             | 举例（设初始时 a=5） |
| :------- | :----- | :------------------- | :------------------- |
| 基础赋值 | =      | 将右侧值赋予左侧变量 | int b = a;（b=5）    |

> 需要特别注意的是，连续赋值需分步操作，例如 `int a = b = 5;` 是错误写法，应拆分为 `int b = 5; int a = b;`。

### 2.五大基本数学运算符

> 五大基本数学运算的运算参数为整数或浮点数类型，实实在在的数字。

这几个运算符相比大家已经十分熟悉了，相信大部分的人看完下面举得例子就能看懂这些运算符的含义了。

| 运算名称 | 加法运算      | 减法运算      | 乘法运算       | 除法运算      | 取模运算(即求余数运算) |
| :------- | :------------ | :------------ | :------------- | :------------ | :--------------------- |
| 运算符   | +             | -             | \*             | /             | %                      |
| 举例     | 5+7(结果为12) | 5-7(结果为-2) | 5\*7(结果为35) | 35/7(结果为5) | 35%3(结果为2)          |

> 需要特别注意的是，C++ 中的除号 `/` 只有当两个参与除法运算的参数中存在至少一个变量类型为浮点数时，才会保留运算结果的小数位。也就是说，如果参与运算的两个参数均为整数，则此时 `/` 将相当于整除，计算结果的小数点后部分将会被自动抹去。例如：`5/3` 的结果将不是 1.666...，而是刨除掉小数点后的 1。此外，还需要满足除数不为 0，否则将会出现除零错误导致代码 RE(Runtime Error)。

### 3.逻辑运算符

逻辑运算符的运算参数为布尔类型，即逻辑的真(true)和假(false)。

- > 1.逻辑并运算符 `&&`：含义类似与汉语中的并且，当且仅当两个参与运算的两个逻辑均为真时，运算的结果才为真。

例如：“牛客里的所有人都很帅”为真命题，当且仅当“我很帅” 并且 “牛客全体员工除了我以外的人都很帅”这两个命题均为真命题。

- > 2.逻辑或运算符 `||`：含义类似与汉语中的或者，只要两个参与运算的两个逻辑有一个为真，运算的结果就为真。

例如：“牛客里存在很帅的人”为真命题，当且仅当“我很帅” 或者 “牛客全体员工除了我以外也有长得帅的人”这两个命题中至少有一个真命题。

- > 3.逻辑非运算符 `!`：含义类似与汉语中的并非，并非真即为假，并非假即为真。

例如：假如“我很帅”是真命题，那么“我并非很帅”就是一个假命题。

| 运算名称 | 逻辑并                      | 逻辑或                       | 逻辑非               |
| :------- | :-------------------------- | :--------------------------- | :------------------- |
| 运算符   | &&                          | \|\|                         | !                    |
| 举例     | true && false(结果为 false) | true \|\| false(结果为 true) | ! true(结果为 false) |

### 4.比较运算符

比较运算符返回布尔值（true/false），用于判断两个值的关系。

| 运算名称 | 运算符 | 功能说明               | 举例（设 a=5） |
| :------- | :----- | :--------------------- | :------------- |
| 等于     | ==     | 判断两值是否相等       | a == 5 → true  |
| 不等于   | !=     | 判断两值是否不等       | a != 3 → true  |
| 大于     | >      | 判断左值是否大于右值   | a > 3 → true   |
| 小于     | <      | 判断左值是否小于右值   | a < 10 → true  |
| 大于等于 | >=     | 判断左值是否不小于右值 | a >= 5 → true  |
| 小于等于 | <=     | 判断左值是否不大于右值 | a <= 5 → true  |

> 需要特别注意的是，`=` 和 `==` 是不一样的两个运算符，千万不要搞混！此外，浮点数由于存在误差，由不同计算过程得到的道理上说应该是相同的两个浮点数，在误差范围的部分却可能存在不同。因此，建议通过判断两个浮点数的差是否在精度范围内（如 1e-9）来判断浮点数是否相等是更为可靠的。

### 5.自增/自减与复合赋值运算符

#### 自增/自减运算符

用于快速对变量在自身值的基础上改变值的操作，分前置和后置两种形式。

> 设i=5

| 运算名称 | 运算符 | 功能说明            | 举例（设 i=5）        |
| :------- | :----- | :------------------ | :-------------------- |
| 前置自增 | ++i    | 先增1，再使用变量值 | cout << ++i; → 输出 6 |
| 后置自增 | i++    | 先使用变量值，再增1 | cout << i++; → 输出 5 |
| 前置自减 | --i    | 先减1，再使用变量值 | cout << --i; → 输出 4 |
| 后置自减 | i--    | 先使用变量值，再减1 | cout << i--; → 输出 5 |

#### 复合赋值运算符

| 运算名称 | 运算符 | 功能说明                            | 举例（设 a=5） |
| :------- | :----- | :---------------------------------- | :------------- |
| 加法赋值 | +=     | a += b 等价于 a = a + b             | a += 3 → a=8   |
| 减法赋值 | -=     | a -= b 等价于 a = a - b             | a -= 2 → a=3   |
| 乘法赋值 | \*=    | a \*= b 等价于 a = a \* b           | a \*= 4 → a=20 |
| 除法赋值 | /=     | a /= b 等价于 a = a / b（整除特性） | a /= 2 → a=2   |
| 取模赋值 | %=     | a %= b 等价于 a = a % b             | a %= 3 → a=2   |

### 位运算符(初学者了解即可)

直接操作二进制位，仅适用于整数类型。（0b 开头后面放数字表示这个数字是在二进制意义下的数字）

| 运算名称 | 运算符 | 功能说明                          | 二进制举例（a=0b1010） |
| :------- | :----- | :-------------------------------- | :--------------------- |
| 按位与   | &      | 对应位同为1时结果为1              | a & 0b1100 → 0b1000    |
| 按位或   | \|     | 对应位有1时结果为1                | a \| 0b1100 → 0b1110   |
| 按位异或 | ^      | 对应位不同时结果为1               | a ^ 0b1100 → 0b0110    |
| 按位取反 | ~      | 每一位取反（0变1，1变0）          | ~a → 0b0101（4位）     |
| 左移     | <<     | 左移n位，低位补0                  | a << 2 → 0b101000      |
| 右移     | >>     | 右移n位，高位补符号位（有符号数） | a >> 1 → 0b0101        |

### （补充：常用数学函数）

| 数学函数名称 | 函数名   | 计算结果          | 举例                    |
| :----------- | :------- | :---------------- | :---------------------- |
| 根号         | sqrt(x)  | x的平方根         | sqrt(9) (结果为 3)      |
| 绝对值       | fabs(x)  | x的绝对值         | fabs(-7.6) (结果为 7.6) |
| 向上取整     | ceil(x)  | 不小于x的最小整数 | ceil(-7.6) (结果为 -7)  |
| 向下取整     | floor(x) | 不大于x的最大整数 | floor(-7.6) (结果为 -8) |
| 四舍五入     | round(x) | x四舍五入后的整数 | round(-7.6) (结果为 -8) |
| 幂函数       | pow(a,b) | a的b次方          | pow(2,6) (结果为 64)    |

## 二、运算符优先级

运算符也是有优先级的，就好比乘法、除法与加法、减法的运算顺序。为了方便理解，这里只列出前面已经介绍过的运算符的优先级，按照从高到低的顺序排列。

## C++ 运算符优先级（从高到低）

# C++ 运算符优先级与结合性速查表

| 优先级 | 运算符                                      | 描述                                     | 结合性   |
|--------|---------------------------------------------|------------------------------------------|----------|
| 1      | `++` `--`（后缀）                           | 后缀自增、后缀自减                       | 从左到右 |
| 2      | `++` `--`（前缀）<br>`+` `-`（一元）<br>`!` `~` | 前缀自增、前缀自减<br>正号、负号<br>逻辑非、按位非 | 从右到左 |
| 3      | `*` `/` `%`                                 | 乘法、除法、取余                         | 从左到右 |
| 4      | `+` `-`                                     | 加法、减法                               | 从左到右 |
| 5      | `<<` `>>`                                   | 按位左移、按位右移                       | 从左到右 |
| 6      | `<` `<=` `>` `>=`                           | 小于、小于等于、大于、大于等于           | 从左到右 |
| 7      | `==` `!=`                                   | 等于、不等于                             | 从左到右 |
| 8      | `&`                                         | 按位与                                   | 从左到右 |
| 9      | `^`                                         | 按位异或                                 | 从左到右 |
| 10     | `\|`                                         | 按位或                                   | 从左到右 |
| 11     | `&&`                                        | 逻辑与                                   | 从左到右 |
| 12     | `\|\|`                                        | 逻辑或                                   | 从左到右 |
| 13     | `=` `+=` `-=`<br> `*=` `/=`<br> `%=` `<<=`<br> `>>=` `&=` `^=` `\|=`| 赋值和复合赋值                           | 从右到左 |

> 💡 **记忆技巧 & 使用建议**
>
> - ✅ **优先级口诀**：`单目 > 算术 > 移位 > 比较 > 位运算 > 逻辑 > 赋值`
> - ⚠️ **易错点**：
>   - `a = b == c` → 先算 `b == c`（优先级7 > 13）
>   - `!a && b` → 先算 `!a`（优先级2 > 11）
> - 🔒 **安全写法**：不确定时**加括号**！`if ((a & b) == c)` 比 `if (a & b == c)` 更可靠
> - 📌 **结合性关键**：
>   - 赋值类（优先级13）**从右向左**：`a = b = c` → `a = (b = c)`
>   - 逻辑运算（11-12）**从左向右**：`a && b && c` 按顺序短路求值

> 需要特别注意的是，当表达式中包含多个优先级相同的运算符时，会按照结合性的规则进行计算。例如，`a + b + c` 会按照从左到右的顺序计算为 `(a + b) + c`，而 `a = b = c` 会按照从右到左的顺序计算为 `a = (b = c)`。

### 在实际编程中，如果表达式比较复杂，建议使用括号 () 明确指定运算顺序，这样可以提高代码的可读性，也能避免因为记错优先级而导致的错误。例如，a + b \* c 可以写成 a + (b \* c) 以明确乘法先于加法执行。
